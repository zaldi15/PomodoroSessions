<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<HBox prefHeight="768.0" prefWidth="1366.0" style="-fx-background-color: #021526;" stylesheets="@../css/Table.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.aplikasi.view.AdminController">
    <children>
        <!-- Sidebar Navigation - Fixed Width -->
        <VBox prefHeight="768.0" prefWidth="280.0" minWidth="280.0" maxWidth="280.0" spacing="0.0" style="-fx-background-color: linear-gradient(to bottom, #03346E 0%, #021526 100%); -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.5), 20, 0, 8, 0);">
            <children>
                <!-- Header Logo -->
                <VBox alignment="CENTER" prefHeight="150.0" prefWidth="280.0" style="-fx-background-color: rgba(2, 21, 38, 0.7); -fx-effect: innershadow(gaussian, rgba(0,0,0,0.6), 12, 0, 0, 6);">
                    <children>
                        <Label style="-fx-effect: dropshadow(gaussian, rgba(226, 226, 182, 0.5), 12, 0, 0, 0);" text="Pomodo+" textFill="#E2E2B6">
                            <font>
                                <Font name="System Bold" size="42.0" />
                            </font>
                        </Label>
                        <Label text="ðŸ” ADMIN PANEL" textAlignment="CENTER" textFill="#6EACDA">
                            <font>
                                <Font name="System Bold" size="12.0" />
                            </font>
                            <VBox.margin>
                                <Insets top="10.0" />
                            </VBox.margin>
                        </Label>
                    </children>
                </VBox>
                
                <!-- Management Label -->
                <Label text=" MANAGEMENT" textFill="#6EACDA">
                    <font>
                        <Font name="System Bold" size="13.0" />
                    </font>
                    <VBox.margin>
                        <Insets bottom="15.0" left="22.0" top="28.0" />
                    </VBox.margin>
                </Label>
                
                <!-- Navigation Buttons -->
                <VBox spacing="8.0">
                    <padding>
                        <Insets left="12.0" right="12.0" />
                    </padding>
                    <children>
                        <Button fx:id="btnManageMissions" alignment="CENTER_LEFT" graphicTextGap="18.0" maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#handleShowMissions" prefHeight="58.0" style="-fx-background-color: rgba(110, 172, 218, 0.1); -fx-background-radius: 12; -fx-cursor: hand; -fx-border-color: rgba(110, 172, 218, 0.3); -fx-border-width: 1.5; -fx-border-radius: 12;" text="ðŸŽ¯  Manage Missions" textFill="#EEEEEE">
                            <font>
                                <Font name="System Bold" size="16.0" />
                            </font>
                            <padding>
                                <Insets left="22.0" />
                            </padding>
                        </Button>
                        
                        <Button fx:id="btnManageUsers" alignment="CENTER_LEFT" graphicTextGap="18.0" maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#handleShowUsers" prefHeight="58.0" style="-fx-background-color: rgba(110, 172, 218, 0.1); -fx-background-radius: 12; -fx-cursor: hand; -fx-border-color: rgba(110, 172, 218, 0.2); -fx-border-width: 1.5; -fx-border-radius: 12;" text="ðŸ‘¥  User List" textFill="#EEEEEE">
                            <font>
                                <Font name="System Bold" size="16.0" />
                            </font>
                            <padding>
                                <Insets left="22.0" />
                            </padding>
                        </Button>

                        <Button fx:id="btnAnalytics" alignment="CENTER_LEFT" graphicTextGap="18.0" maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#handleShowAnalytics" prefHeight="58.0" style="-fx-background-color: rgba(110, 172, 218, 0.1); -fx-background-radius: 12; -fx-cursor: hand; -fx-border-color: rgba(110, 172, 218, 0.2); -fx-border-width: 1.5; -fx-border-radius: 12;" text="ðŸ“Š  Analytics" textFill="#EEEEEE">
                            <font>
                                <Font name="System Bold" size="16.0" />
                            </font>
                            <padding>
                                <Insets left="22.0" />
                            </padding>
                        </Button>
                    </children>
                </VBox>
                
                <!-- Spacer -->
                <VBox VBox.vgrow="ALWAYS" />
                
                <!-- Logout Button -->
                <Button fx:id="btnLogout" alignment="CENTER" maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#handleLogout" prefHeight="58.0" style="-fx-background-color: linear-gradient(135deg, #E2E2B6 0%, #CFCF9F 100%); -fx-background-radius: 12; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 12, 0, 0, 4);" text="ðŸšª  Logout" textFill="#021526">
                    <font>
                        <Font name="System Bold" size="16.0" />
                    </font>
                    <VBox.margin>
                        <Insets bottom="25.0" left="12.0" right="12.0" />
                    </VBox.margin>
                </Button>
            </children>
        </VBox>
        
        <!-- Main Content Area - Flexible Width -->
        <VBox prefHeight="768.0" spacing="0.0" style="-fx-background-color: transparent;" HBox.hgrow="ALWAYS">
            <children>
                <!-- Top Header Bar -->
                <HBox alignment="CENTER_LEFT" prefHeight="120.0" style="-fx-background-color: linear-gradient(135deg, #03346E 0%, #6EACDA 100%); -fx-border-color: #E2E2B6; -fx-border-width: 0 0 3 0; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.5), 15, 0, 0, 5);">
                    <padding>
                        <Insets left="50.0" right="50.0" />
                    </padding>
                    <children>
                        <Label fx:id="lblHeaderTitle" text="ðŸŽ¯ Mission Control Center" textFill="#E2E2B6">
                            <font>
                                <Font name="System Bold" size="36.0" />
                            </font>
                        </Label>
                        <VBox HBox.hgrow="ALWAYS" />
                        
                        <!-- Mission Action Buttons -->
                        <HBox fx:id="hbMissionActions" alignment="CENTER_RIGHT" spacing="15.0">
                            <children>
                                <Button onAction="#handleAddMission" prefHeight="50.0" prefWidth="180.0" style="-fx-background-color: #E2E2B6; -fx-background-radius: 14; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 12, 0, 0, 4);" text="âž• Create Mission" textFill="#021526">
                                    <font>
                                        <Font name="System Bold" size="15.0" />
                                    </font>
                                </Button>
                                <Button onAction="#handleDeleteMission" prefHeight="50.0" prefWidth="180.0" style="-fx-background-color: #E2E2B6; -fx-background-radius: 14; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 12, 0, 0, 4);" text="ðŸ—‘ Delete Mission" textFill="#021526">
                                    <font>
                                        <Font name="System Bold" size="15.0" />
                                    </font>
                                </Button>
                            </children>
                        </HBox>

                        <!-- User Action Buttons -->
                        <HBox fx:id="hbUserActions" alignment="CENTER_RIGHT" managed="false" spacing="15.0" visible="false">
                            <children>
                                <Button onAction="#handleDeleteUser" prefHeight="50.0" prefWidth="180.0" style="-fx-background-color: linear-gradient(135deg, #FF4C4C 0%, #E03E3E 100%); -fx-background-radius: 12; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0, 0, 3);" text="ðŸš« Ban User" textFill="WHITE">
                                    <font>
                                        <Font name="System Bold" size="15.0" />
                                    </font>
                                </Button>
                            </children>
                        </HBox>
                    </children>
                </HBox>
                
                <!-- Content Container -->
                <VBox spacing="0.0" VBox.vgrow="ALWAYS">
                    <padding>
                        <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                    </padding>
                    <children>
                        <!-- Content Header -->
                        <HBox alignment="CENTER_LEFT" spacing="18.0" style="-fx-background-color: rgba(3, 52, 110, 0.4); -fx-background-radius: 18 18 0 0; -fx-padding: 22 35 22 35; -fx-border-color: #6EACDA; -fx-border-width: 2 2 0 2; -fx-border-radius: 18 18 0 0;">
                            <children>
                                <Label fx:id="lblContentSubtitle" text="ðŸŽ¯ Global Daily Missions" textFill="#E2E2B6">
                                    <font>
                                        <Font name="System Bold" size="24.0" />
                                    </font>
                                </Label>
                                <VBox HBox.hgrow="ALWAYS" />
                            </children>
                        </HBox>
                        
                        <!-- Content Stack -->
                        <StackPane style="-fx-background-color: rgba(2, 21, 38, 0.8); -fx-background-radius: 0 0 22 22; -fx-border-color: #6EACDA; -fx-border-radius: 0 0 22 22; -fx-border-width: 0 2 2 2;" VBox.vgrow="ALWAYS">
                            <children>
                                <!-- Missions Table -->
                                <TableView fx:id="tvMissions" style="-fx-background-color: transparent; -fx-background-radius: 0 0 22 22; -fx-border-width: 0;">
                                    <columns>
                                        <TableColumn fx:id="colId" prefWidth="100.0" style="-fx-alignment: CENTER;" text="ðŸ†” ID" />
                                        <TableColumn fx:id="colTitle" prefWidth="300.0" style="-fx-alignment: CENTER-LEFT;" text="ðŸ“ Mission Name" />
                                        <TableColumn fx:id="colDescription" prefWidth="426.0" style="-fx-alignment: CENTER-LEFT;" text="ðŸ“„ Description" />
                                        <TableColumn fx:id="colTargetDate" prefWidth="200.0" style="-fx-alignment: CENTER;" text="ðŸ“… Target Date" />
                                    </columns>
                                    <columnResizePolicy>
                                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                    </columnResizePolicy>
                                    <placeholder>
                                        <VBox alignment="CENTER" spacing="12.0">
                                            <children>
                                                <Label style="-fx-font-size: 56;" text="ðŸŽ¯" textFill="#6EACDA" />
                                                <Label style="-fx-font-size: 18; -fx-font-weight: bold;" text="No missions available" textFill="#E2E2B6" />
                                                <Label style="-fx-font-size: 14; -fx-font-style: italic;" text="Create your first mission to get started!" textFill="#6EACDA" />
                                            </children>
                                        </VBox>
                                    </placeholder>
                                </TableView>

                                <!-- Users Table -->
                                <TableView fx:id="tvUsers" managed="false" style="-fx-background-color: transparent; -fx-background-radius: 0 0 22 22; -fx-border-width: 0;" visible="false">
                                    <columns>
                                        <TableColumn fx:id="colUserId" prefWidth="100.0" style="-fx-alignment: CENTER;" text="ðŸ†” UID" />
                                        <TableColumn fx:id="colUsername" prefWidth="250.0" style="-fx-alignment: CENTER-LEFT;" text="ðŸ‘¤ Username" />
                                        <TableColumn fx:id="colEmail" prefWidth="326.0" style="-fx-alignment: CENTER-LEFT;" text="ðŸ“§ Email" />
                                        <TableColumn fx:id="colRole" prefWidth="150.0" style="-fx-alignment: CENTER;" text="ðŸŽ­ Role" />
                                        <TableColumn fx:id="colLastLogin" prefWidth="200.0" style="-fx-alignment: CENTER;" text="â° Last Login" />
                                    </columns>
                                    <columnResizePolicy>
                                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                    </columnResizePolicy>
                                    <placeholder>
                                        <VBox alignment="CENTER" spacing="12.0">
                                            <children>
                                                <Label style="-fx-font-size: 56;" text="ðŸ‘¥" textFill="#6EACDA" />
                                                <Label style="-fx-font-size: 18; -fx-font-weight: bold;" text="No users found" textFill="#E2E2B6" />
                                                <Label style="-fx-font-size: 14; -fx-font-style: italic;" text="User list will appear here" textFill="#6EACDA" />
                                            </children>
                                        </VBox>
                                    </placeholder>
                                </TableView>

                                <!-- Analytics View -->
                                <VBox fx:id="vbAnalytics" alignment="CENTER" managed="false" styleClass="analytics-container" visible="false">
                                    <children>
                                        <!-- Analytics Header -->
                                        <Label styleClass="analytics-header" text="ðŸ“Š Analytics Dashboard" textFill="#E2E2B6">
                                            <font>
                                                <Font name="System Bold" size="22.0" />
                                            </font>
                                        </Label>

                                        <!-- Pie Chart -->
                                        <PieChart fx:id="categoryChart" legendSide="RIGHT" minHeight="400.0" minWidth="800.0" styleClass="pie-chart-container, pie-chart-animated" title="Global Focus Categories" VBox.vgrow="ALWAYS" />
                                    </children>
                                    <padding>
                                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                    </padding>
                                </VBox>
                            </children>
                            <padding>
                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                            </padding>
                        </StackPane>
                    </children>
                </VBox>
            </children>
        </VBox>
    </children>
</HBox>
